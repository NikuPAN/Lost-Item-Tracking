{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\YAMATO\\\\Desktop\\\\LostItemTracking\\\\client\\\\src\\\\components\\\\DialogUpdate.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Message from './Message';\nimport DateTime from './DateTime';\nimport Description from './Description';\nimport ContactWay from './ContactWay';\n\nconst DialogUpdate = props => {\n  _s();\n\n  // Opens Delete Confirmation Dialog\n  const [openUpdateDialog, setOpenUpdateDialog] = useState(false); // Photo Description\n\n  const [photoDesc, setPhotoDesc] = useState(props.desc); // The way to contact\n\n  const [contactWay, setContactWay] = useState(props.contact); // Is it found or lost item? 0 = lost, 1 = found\n\n  const [option, setOption] = useState(props.option); // Time finding or losing\n\n  const [dateTime, setDateTime] = useState(props.time); // Message\n\n  const [message, setMessage] = useState(''); // Change Callback Function\n\n  const handleDialogOpen = () => {\n    setOpenUpdateDialog(true);\n  };\n\n  const handleDialogClose = () => {\n    setOpenUpdateDialog(false);\n  };\n\n  const handleDialogUpdate = e => {\n    setOpenUpdateDialog(false);\n    console.log(props.id); // doUpdateDetail(e.target.value);\n\n    props.onUpdate();\n  };\n\n  const onChangePhotoDesc = e => {\n    setPhotoDesc(e);\n  };\n\n  const onChangeContactWay = e => {\n    setContactWay(e);\n  };\n\n  const onChangeOption = e => {\n    setOption(e.target.value);\n  };\n\n  const onChangeDateTime = e => {\n    setDateTime(e);\n  };\n\n  const resetForm = () => {\n    setOption(props.option);\n    setPhotoDesc(props.desc);\n    setContactWay(props.contact);\n  };\n\n  const doUpdateDetail = async id => {\n    if (photoDesc === '' || photoDesc === null) {\n      // photo description must not be blank.\n      return;\n    }\n\n    if (contactWay === '' || contactWay === null) {\n      // contact way must not be blank.\n      return;\n    }\n\n    console.log(\"Update Report is called. ID: \" + id); // convert text to int before upload to db.\n\n    let opt = option === '拾獲' ? 1 : 0; // convert date time to timestamp before upload to db.\n\n    let ts = new Date(dateTime).getTime() / 1000;\n    let fileID = -1;\n\n    try {\n      let res = await fetch('/api/updateReport', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          option: opt,\n          timestamp: ts,\n          description: photoDesc,\n          contact: contactWay,\n          id: id\n        })\n      });\n      let result = await res.json(); // console.log(res);\n\n      if (result && result.success === true) {\n        fileID = result.id;\n      } else {\n        setMessage(result.msg);\n        fileID = -1;\n      }\n    } catch (e) {\n      console.log(e);\n      resetForm();\n    }\n\n    return fileID;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      value: \"Update\",\n      id: props.id,\n      onClick: handleDialogOpen,\n      children: \"\\u66F4\\u65B0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openUpdateDialog,\n      onClose: handleDialogClose,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: \"\\u66F4\\u65B0\\u8CC7\\u8A0A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(DialogContentText, {\n          id: \"alert-dialog-description\",\n          children: \"\\u8ACB\\u66F4\\u65B0\\u5831\\u544A\\u8CC7\\u8A0A\\u6216\\u4FEE\\u6B63\\u932F\\u8AA4\\uFF0C\\u82E5\\u8AA4\\u9EDE\\u53EF\\u4EE5\\u9EDE\\u64CA\\u8868\\u683C\\u4EE5\\u5916\\u5730\\u65B9\\u6536\\u8D77\\u6B64\\u5C0D\\u8A71\\u6846\\u3002\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), message ? /*#__PURE__*/_jsxDEV(Message, {\n          msg: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 22\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n          onChange: onChangeOption,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u8ACB\\u9078\\u64C7\\u56DE\\u5831\\u985E\\u578B:\\xA0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            value: \"\\u62FE\\u7372\",\n            checked: option === '拾獲'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), \" \\u62FE\\u7372\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            value: \"\\u907A\\u5931\",\n            checked: option === '遺失'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), \" \\u907A\\u5931\\xA0\\xA0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"multiline mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-mb-4\",\n            children: [option, \"\\u6642\\u9593:\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DateTime, {\n            onChange: onChangeDateTime,\n            dateTime: dateTime,\n            option: option\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Description, {\n            description: photoDesc,\n            onChange: onChangePhotoDesc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(ContactWay, {\n            contact: contactWay,\n            onChange: onChangeContactWay\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          onClick: handleDialogClose,\n          color: \"primary\",\n          autoFocus: true,\n          children: \"\\u53D6\\u6D88\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          value: props.id,\n          onClick: handleDialogUpdate,\n          color: \"secondary\",\n          children: \"\\u66F4\\u65B0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DialogUpdate, \"H8CGjtRG0TyybrdJ8t6RnW7Fup4=\");\n\n_c = DialogUpdate;\nexport default DialogUpdate;\n\nvar _c;\n\n$RefreshReg$(_c, \"DialogUpdate\");","map":{"version":3,"sources":["C:/Users/YAMATO/Desktop/LostItemTracking/client/src/components/DialogUpdate.js"],"names":["React","useState","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Message","DateTime","Description","ContactWay","DialogUpdate","props","openUpdateDialog","setOpenUpdateDialog","photoDesc","setPhotoDesc","desc","contactWay","setContactWay","contact","option","setOption","dateTime","setDateTime","time","message","setMessage","handleDialogOpen","handleDialogClose","handleDialogUpdate","e","console","log","id","onUpdate","onChangePhotoDesc","onChangeContactWay","onChangeOption","target","value","onChangeDateTime","resetForm","doUpdateDetail","opt","ts","Date","getTime","fileID","res","fetch","method","headers","body","JSON","stringify","timestamp","description","result","json","success","msg"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Message from './Message';\r\nimport DateTime from './DateTime';\r\nimport Description from './Description';\r\nimport ContactWay from './ContactWay';\r\n\r\n\r\nconst DialogUpdate = (props) => {\r\n\r\n  // Opens Delete Confirmation Dialog\r\n  const [openUpdateDialog, setOpenUpdateDialog] = useState(false);\r\n  // Photo Description\r\n\tconst [photoDesc, setPhotoDesc] = useState(props.desc);\r\n\t// The way to contact\r\n\tconst [contactWay, setContactWay] = useState(props.contact);\r\n\t// Is it found or lost item? 0 = lost, 1 = found\r\n\tconst [option, setOption] = useState(props.option);\r\n\t// Time finding or losing\r\n\tconst [dateTime, setDateTime] = useState(props.time);\r\n\t// Message\r\n\tconst [message, setMessage] = useState('');\r\n\r\n  // Change Callback Function\r\n  const handleDialogOpen = () => {\r\n    setOpenUpdateDialog(true);\r\n  }\r\n\r\n  const handleDialogClose = () => {\r\n    setOpenUpdateDialog(false);\r\n  }\r\n\r\n  const handleDialogUpdate = (e) => {\r\n    setOpenUpdateDialog(false);\r\n    console.log(props.id);\r\n    // doUpdateDetail(e.target.value);\r\n    props.onUpdate();\r\n  }\r\n\r\n\tconst onChangePhotoDesc = (e) => {\r\n\t\tsetPhotoDesc(e);\r\n\t}\r\n\r\n\tconst onChangeContactWay = (e) => {\r\n\t\tsetContactWay(e);\r\n\t}\r\n\r\n\tconst onChangeOption = (e) => {\r\n\t\tsetOption(e.target.value);\r\n\t}\r\n\r\n\tconst onChangeDateTime = (e) => {\r\n\t\tsetDateTime(e);\r\n\t}\r\n\r\n\tconst resetForm = () => {\r\n\t\tsetOption(props.option);\r\n\t\tsetPhotoDesc(props.desc);\r\n\t\tsetContactWay(props.contact);\r\n\t\t\r\n  }\r\n\r\n  const doUpdateDetail = async(id) => {\r\n    if(photoDesc === '' || photoDesc === null) {\r\n      // photo description must not be blank.\r\n      return;\r\n    }\r\n    if(contactWay === '' || contactWay === null) {\r\n      // contact way must not be blank.\r\n      return;\r\n    }\r\n    console.log(\"Update Report is called. ID: \"+id);\r\n    // convert text to int before upload to db.\r\n\t\tlet opt = (option === '拾獲') ? 1 : 0;\r\n\r\n\t\t// convert date time to timestamp before upload to db.\r\n\t\tlet ts = new Date(dateTime).getTime()/1000;\r\n\r\n\t\tlet fileID = -1;\r\n\r\n    try {\r\n      let res = await fetch('/api/updateReport', {\r\n        method: 'post',\r\n        headers: {\r\n          'Accept':'application/json',\r\n          'Content-Type':'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n\t\t\t\t\toption: opt,\r\n      \t\ttimestamp: ts,\r\n      \t\tdescription: photoDesc,\r\n          contact: contactWay,\r\n          id: id\r\n        })\r\n      });\r\n\r\n      let result = await res.json();\r\n      // console.log(res);\r\n      if(result && result.success === true) {\r\n\t\t\t\tfileID = result.id;\r\n      }\r\n      else {\r\n\t\t\t\tsetMessage(result.msg);\r\n\t\t\t\tfileID = -1;\r\n      }\r\n    }\r\n    catch(e) {\r\n      console.log(e);\r\n      resetForm();\r\n\t\t}\r\n\t\treturn fileID;\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      <Button \r\n        variant=\"contained\" \r\n        color=\"primary\" \r\n        value=\"Update\"\r\n        id={props.id} \r\n        onClick={handleDialogOpen}>\r\n          更新\r\n      </Button>\r\n      <Dialog\r\n        open={openUpdateDialog}\r\n        onClose={handleDialogClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">更新資訊</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            請更新報告資訊或修正錯誤，若誤點可以點擊表格以外地方收起此對話框。\r\n          </DialogContentText>\r\n          { message? <Message msg={message} /> : null }\r\n          <div onChange={onChangeOption}>\r\n\t\t\t\t\t<label>請選擇回報類型:&nbsp;</label>\r\n            <input type='radio' value='拾獲' checked={option === '拾獲'}/> 拾獲&nbsp;&nbsp;\r\n            <input type='radio' value='遺失' checked={option === '遺失'}/> 遺失&nbsp;&nbsp;\r\n          </div>\r\n          <div className=\"multiline mb-4\">\r\n            <div className=\"col-mb-4\">{option}時間:</div>\r\n              <DateTime\tonChange={onChangeDateTime} dateTime={dateTime} option={option} />\r\n          </div>\r\n          <div>\r\n            <Description description={photoDesc} \r\n              onChange={onChangePhotoDesc}/>\r\n          </div>\r\n          <br/>\r\n          <div>\r\n            <ContactWay \r\n              contact={contactWay}\r\n              onChange={onChangeContactWay}\r\n            />\r\n          </div>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button variant=\"outlined\" onClick={handleDialogClose} color=\"primary\" autoFocus>\r\n            取消\r\n          </Button>\r\n          <Button variant=\"outlined\" value={props.id} onClick={handleDialogUpdate} color=\"secondary\">\r\n            更新\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DialogUpdate;\r\n"]},"metadata":{},"sourceType":"module"}