(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),i=n(11),s=n.n(i),o=n(8),l=n(138),d=n(140),u=n(134),j=n(135),b=n(133),p=n(15),O=n.n(p),h=n(22),x=function(e){var t=e.msg;return Object(a.jsxs)("div",{className:"alert alert-info alert-dismissible fade show",role:"alert",children:[t,Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",children:Object(a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})},m=function(e){var t=e.percentage;return Object(a.jsx)("div",{className:"progress",children:Object(a.jsxs)("div",{className:"progress-bar progress-bar-striped progress-bar-animated bg-info",role:"progressbar",style:{width:"".concat(t,"%")},children:[t,"%"]})})},f=n(128),g=n(137);function v(e){var t=e.dateTime?new Date(e.dateTime):new Date,n=t.getFullYear()+"-"+(t.getMonth()<10?"0"+(t.getMonth()+1):t.getMonth())+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+"T"+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()),r=Object(c.useState)(n),i=Object(o.a)(r,2),s=i[0],l=i[1],d=Object(f.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),width:220,background:"white"}}}))();return Object(a.jsx)("form",{className:d.container,noValidate:!0,children:Object(a.jsx)(g.a,{id:"datetime",style:{borderRadius:"5px",textAlign:"center"},type:"datetime-local",defaultValue:s,onChange:function(t){l(t.target.value),e.onChange(t.target.value)},className:d.textField,InputLabelProps:{shrink:!0},variant:"outlined"})})}function y(e){var t=Object(c.useState)(e.description),n=Object(o.a)(t,2),r=n[0],i=n[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"col-mb-4",children:"\u8acb\u5f62\u5bb9\u4e8b\u4ef6\u7d93\u904e:"}),Object(a.jsx)(g.a,{id:"description",label:"\u8acb\u63cf\u8ff0\u907a\u5931\u7269\u54c1\u3001\u6642\u9593\u8207\u5730\u9ede\u7b49\u4ee5\u4fbf\u65bc\u5c0b\u7372",style:{background:"white",borderRadius:"5px"},placeholder:r,onChange:function(t){i(t.target.value),e.onChange(t.target.value)},fullWidth:!0,multiline:!0,rows:"4",margin:"normal",InputLabelProps:{shrink:!0},variant:"filled"})]})}function k(e){var t=Object(c.useState)(e.contact),n=Object(o.a)(t,2),r=n[0],i=n[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"col-mb-4",children:"\u8acb\u7559\u4e0b\u806f\u7d61\u65b9\u5f0f:"}),Object(a.jsx)(g.a,{id:"contact-way",label:"\u59d3\u540d\u53ca\u96fb\u8a71/\u96fb\u90f5\u5730\u5740\u7686\u53ef\u63a5\u53d7",style:{background:"white",borderRadius:"5px"},placeholder:r,onChange:function(t){i(t.target.value),e.onChange(t.target.value)},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},variant:"filled"})]})}var N=n(59),C=n.n(N),w=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)("\u8acb\u9078\u64c7\u8981\u4e0a\u50b3\u7684\u7167\u7247"),s=Object(o.a)(i,2),l=s[0],d=s[1],u=Object(c.useState)("\u4f8b: \u672c\u4eba\u65bc\u4eca\u5929\u65e9\u4e0a9\u6642\u907a\u5931\u4e00\u500b\u9322\u5305..."),j=Object(o.a)(u,2),b=j[0],p=j[1],f=Object(c.useState)("12345678/abc@example.com..."),g=Object(o.a)(f,2),N=g[0],w=g[1],S=Object(c.useState)("\u62fe\u7372"),D=Object(o.a)(S,2),T=D[0],F=D[1],M=Object(c.useState)(new Date),R=Object(o.a)(M,2),P=R[0],I=R[1],U=Object(c.useState)({}),A=Object(o.a)(U,2),J=A[0],H=A[1],L=Object(c.useState)(""),W=Object(o.a)(L,2),B=W[0],E=W[1],V=Object(c.useState)(0),Y=Object(o.a)(V,2),q=Y[0],z=Y[1],G=function(){var e=Object(h.a)(O.a.mark((function e(){var t,n,a,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==b&&null!==b){e.next=2;break}return e.abrupt("return");case 2:if(""!==N&&null!==N){e.next=4;break}return e.abrupt("return");case 4:return console.log("uploadDetail is called."),t="\u62fe\u7372"===T?1:0,n=new Date(P).getTime()/1e3,a=-1,e.prev=8,e.next=11,fetch("/api/addReport",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({option:t,timestamp:n,description:b,contact:N})});case 11:return c=e.sent,e.next=14,c.json();case 14:(i=e.sent)&&!0===i.success?(a=i.id,console.log(a)):(E(i.msg),a=-1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(8),console.log(e.t0),r(""),d("\u8acb\u9078\u64c7\u8981\u4e0a\u50b3\u7684\u7167\u7247"),p("\u4f8b: \u672c\u4eba\u65bc\u4eca\u5929\u65e9\u4e0a9\u6642\u907a\u5931\u4e00\u500b\u9322\u5305..."),w("12345678/abc@example.com..."),F("\u62fe\u7372");case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,null,[[8,18]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(h.a)(O.a.mark((function e(t){var a,c,r,i,s,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=G(),console.log(a),-1===a){e.next=21;break}return(c=new FormData).append("file",n),e.prev=6,e.next=9,C.a.post("/api/upload",c,{headers:{"Content-Type":"multiport/form-data"},onUploadProgress:function(e){z(parseInt(Math.round(100*e.loaded/e.total))),setTimeout((function(){return z(0)}),3e3)}});case 9:r=e.sent,console.log(r.data),i=r.data,s=i.fileName,o=i.filePath,H({fileName:s,filePath:o}),E("File Uploaded!"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),500===e.t0.response.status?E("There is a problem with the server. Please try again later"):E(e.t0.response.data.msg);case 19:e.next=22;break;case 21:E("There is a problem uploading detail. Please try again later");case 22:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(c.Fragment,{children:[B?Object(a.jsx)(x,{msg:B}):null,Object(a.jsxs)("form",{onSubmit:K,children:[Object(a.jsxs)("div",{onChange:function(e){F(e.target.value)},children:[Object(a.jsx)("label",{children:"\u8acb\u9078\u64c7\u56de\u5831\u985e\u578b:\xa0"}),Object(a.jsx)("input",{type:"radio",value:"\u62fe\u7372",checked:"\u62fe\u7372"===T})," \u62fe\u7372\xa0\xa0",Object(a.jsx)("input",{type:"radio",value:"\u907a\u5931",checked:"\u907a\u5931"===T})," \u907a\u5931\xa0\xa0"]}),Object(a.jsxs)("div",{className:"multiline mb-4",children:[Object(a.jsxs)("div",{className:"col-mb-4",children:[T,"\u6642\u9593:"]}),Object(a.jsx)(v,{onChange:function(e){I(e)},option:T})]}),Object(a.jsx)("div",{children:Object(a.jsx)(y,{description:b,onChange:function(e){p(e)}})}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)(k,{contact:N,onChange:function(e){w(e)}})}),Object(a.jsx)("br",{}),q>0?Object(a.jsx)(m,{percentage:q}):null,Object(a.jsxs)("div",{className:"custom-file mb-4",children:[Object(a.jsx)("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(e){r(e.target.files[0]),d(e.target.files[0].name)}}),Object(a.jsx)("label",{className:"custom-file-label",htmlFor:"customFile",children:l})]}),Object(a.jsx)("input",{type:"submit",value:"\u56de\u5831",className:"btn btn-primary btn-block mt-4"})]}),J.fileName?Object(a.jsx)("div",{className:"row mt-5",children:Object(a.jsxs)("div",{className:"col-md-6 m-auto",children:[Object(a.jsxs)("h3",{className:"text-center",children:["\u6a94\u6848: ",J.fileName]}),Object(a.jsx)("img",{style:{width:"100%"},src:J.filePath,alt:""})]})}):null]})},S=n.p+"static/media/dinner.307fa8bb.png",D=n(136),T=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],i=n[1],s=Object(c.useState)(e.desc),p=Object(o.a)(s,2),m=p[0],f=p[1],g=Object(c.useState)(e.contact),N=Object(o.a)(g,2),C=N[0],w=N[1],S=Object(c.useState)(e.option),T=Object(o.a)(S,2),F=T[0],M=T[1],R=Object(c.useState)(e.time),P=Object(o.a)(R,2),I=P[0],U=P[1],A=Object(c.useState)(""),J=Object(o.a)(A,2),H=J[0],L=J[1],W=function(){i(!1)},B=function(){var t=Object(h.a)(O.a.mark((function t(n){var a,c,r,i,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==m&&null!==m){t.next=2;break}return t.abrupt("return");case 2:if(""!==C&&null!==C){t.next=4;break}return t.abrupt("return");case 4:return console.log("Update Report is called. ID: "+n),a="\u62fe\u7372"===F?1:0,c=new Date(I).getTime()/1e3,r=-1,t.prev=8,t.next=11,fetch("/api/updateReport",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({option:a,timestamp:c,description:m,contact:C,id:n})});case 11:return i=t.sent,t.next=14,i.json();case 14:(s=t.sent)&&!0===s.success?r=s.id:(L(s.msg),r=-1),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(8),console.log(t.t0),M(e.option),f(e.desc),w(e.contact);case 22:return t.abrupt("return",r);case 23:case"end":return t.stop()}}),t,null,[[8,18]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(l.a,{variant:"contained",color:"primary",value:"Update",id:e.id,onClick:function(){i(!0)},children:"\u66f4\u65b0"}),Object(a.jsxs)(d.a,{open:r,onClose:W,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(b.a,{id:"alert-dialog-title",children:"\u66f4\u65b0\u8cc7\u8a0a"}),Object(a.jsxs)(u.a,{children:[Object(a.jsx)(j.a,{id:"alert-dialog-description",children:"\u8acb\u66f4\u65b0\u5831\u544a\u8cc7\u8a0a\u6216\u4fee\u6b63\u932f\u8aa4\uff0c\u82e5\u8aa4\u9ede\u53ef\u4ee5\u9ede\u64ca\u8868\u683c\u4ee5\u5916\u5730\u65b9\u6536\u8d77\u6b64\u5c0d\u8a71\u6846\u3002"}),H?Object(a.jsx)(x,{msg:H}):null,Object(a.jsxs)("div",{onChange:function(e){M(e.target.value)},children:[Object(a.jsx)("label",{children:"\u8acb\u9078\u64c7\u56de\u5831\u985e\u578b:\xa0"}),Object(a.jsx)("input",{type:"radio",value:"\u62fe\u7372",checked:"\u62fe\u7372"===F})," \u62fe\u7372\xa0\xa0",Object(a.jsx)("input",{type:"radio",value:"\u907a\u5931",checked:"\u907a\u5931"===F})," \u907a\u5931\xa0\xa0"]}),Object(a.jsxs)("div",{className:"multiline mb-4",children:[Object(a.jsxs)("div",{className:"col-mb-4",children:[F,"\u6642\u9593:"]}),Object(a.jsx)(v,{onChange:function(e){U(e)},dateTime:I,option:F})]}),Object(a.jsx)("div",{children:Object(a.jsx)(y,{description:m,onChange:function(e){f(e)}})}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)(k,{contact:C,onChange:function(e){w(e)}})})]}),Object(a.jsxs)(D.a,{children:[Object(a.jsx)(l.a,{variant:"outlined",onClick:W,color:"primary",autoFocus:!0,children:"\u53d6\u6d88"}),Object(a.jsx)(l.a,{variant:"outlined",value:e.id,onClick:function(t){i(!1),B(e.id),e.onUpdate()},color:"secondary",children:"\u66f4\u65b0"})]})]})]})},F=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],i=n[1],s=function(){i(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(l.a,{variant:"contained",color:"secondary",value:"Delete",id:e.id,onClick:function(){i(!0)},children:"\u522a\u9664"}),Object(a.jsxs)(d.a,{open:r,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(b.a,{id:"alert-dialog-title",children:"\u78ba\u5b9a\u8981\u522a\u9664\u9019\u4efd\u5831\u544a\u55ce?"}),Object(a.jsx)(u.a,{children:Object(a.jsx)(j.a,{id:"alert-dialog-description",children:"\u5831\u544a\u4e00\u65e6\u88ab\u522a\u9664\u4fbf\u7121\u6cd5\u5fa9\u539f\u3002"})}),Object(a.jsxs)(D.a,{children:[Object(a.jsx)(l.a,{variant:"contained",color:"primary",onClick:s,autoFocus:!0,children:"\u53d6\u6d88"}),Object(a.jsx)(l.a,{variant:"contained",color:"secondary",value:e.id,onClick:function(t){i(!1),e.onDelete()},children:"\u522a\u9664"})]})]})]})},M=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],i=function(){var e=Object(h.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/findAllReport",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:if(!(n=e.sent)||!0!==n.success){e.next=8;break}return e.abrupt("return",n.data);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(h.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/deleteReport",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:t})});case 2:return n=e.sent,e.next=5,n.json();case 5:return(a=e.sent)&&!0===a.success&&console.log(a.msg),e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=Object(c.useCallback)((function(){i().then((function(e){return e.map((function(e){return{id:e.id,option:e.option,timestamp:e.timestamp,description:e.description,contact:e.contact}}))})).then((function(e){return r(e)}))}),[]);Object(c.useEffect)((function(){l()}),[l,n]);var d=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+("0"+t.getMinutes()).substr(-2)};return Object(a.jsx)("div",{className:"container",children:n.map((function(e){return Object(a.jsxs)("div",{className:"box",children:[Object(a.jsxs)("div",{className:"imgBox",children:[Object(a.jsx)("img",{src:S,alt:""}),Object(a.jsx)(T,{id:e.id,option:0===e.option?"\u907a\u5931":"\u62fe\u7372",time:e.timestamp,desc:e.description,contact:e.contact,onUpdate:function(){return t=e.id,void console.log("Updated Report ID: "+t);var t}}),Object(a.jsx)(F,{id:e.id,onDelete:function(){return t=e.id,void s(t);var t}})]}),Object(a.jsx)("div",{className:"details",children:Object(a.jsxs)("div",{className:"content",children:[Object(a.jsxs)("h5",{"data-status":e.option,children:[Object(a.jsx)("b",{children:0===e.option?"\u5931":"\u5831"})," \u65bc ",d(e.timestamp)]}),Object(a.jsxs)("p",{children:[e.description,"\uff0c",0===e.option?"\u5982\u62fe\u7372":"\u6b32\u53d6\u56de","\u8acb\u806f\u7d61: ",e.contact]})]})})]})}))})},R=(n(97),function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)(l.a,{variant:"contained",color:"primary",onClick:function(){r(!0)},children:"\u56de\u5831"}),Object(a.jsxs)(d.a,{open:n,onClose:function(){r(!1)},"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(b.a,{id:"form-dialog-title",children:"\u56de\u5831\u907a\u5931/\u62fe\u7372\u7269\u54c1"}),Object(a.jsxs)(u.a,{children:[Object(a.jsxs)(j.a,{children:["\u82e5\u907a\u5931\u7269\u54c1\uff0c\u8acb\u586b\u5beb\u907a\u5931\u7269\u54c1\u7684\u7d93\u904e\u3001\u6642\u9593\u53ca\u5730\u9ede\uff0c\u4ee5\u4fbf\u66f4\u5feb\u5c0b\u56de\u5931\u7269\u3002",Object(a.jsx)("br",{}),"\u82e5\u62fe\u7372\u7269\u54c1\uff0c\u8acb\u5f62\u5bb9\u7269\u54c1\u7279\u5fb5\uff0c\u4e26\u7559\u4e0b\u806f\u7d61\u65b9\u5f0f\u4ee5\u4fbf\u5931\u4e3b\u806f\u7d61\u3002"]}),Object(a.jsx)(w,{})]})]})]}),Object(a.jsx)("div",{className:"report",children:Object(a.jsx)(M,{})})]})}),P=(n(98),function(){return Object(a.jsxs)("div",{className:"container mt-4",children:[Object(a.jsxs)("h4",{className:"display-4 text-center mb-4",children:[Object(a.jsx)("i",{className:"fab fa-react"})," \u5931\u7269\u4e92\u52a9"]}),Object(a.jsx)(R,{})]})});s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(P,{})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.2b59f688.chunk.js.map